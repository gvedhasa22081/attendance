<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Smart Attendance System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --primary: #38bdf8;
      --accent: #22c55e;
      --danger: #f97373;
      --bg-dark: #020617;
      --glass: rgba(15, 23, 42, 0.8);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      background: linear-gradient(135deg, #020617, #0f172a, #1d0647, #0b5b8a);
      background-size: 300% 300%;
      animation: bgShift 12s infinite alternate ease-in-out;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 16px;
      color: #e5e7eb;
    }

    @keyframes bgShift {
      0% { background-position: 0% 0%; }
      50% { background-position: 50% 100%; }
      100% { background-position: 100% 0%; }
    }

    .app {
      width: 100%;
      max-width: 1200px;
      background: radial-gradient(circle at top left, rgba(56,189,248,0.18), rgba(15,23,42,0.96));
      border-radius: 24px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      box-shadow: 0 20px 60px rgba(0,0,0,0.8);
      padding: 18px;
      position: relative;
      overflow: hidden;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 14px;
      flex-wrap: wrap;
      gap: 10px;
    }

    .title-row {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .pulse-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--accent);
      box-shadow: 0 0 16px var(--accent);
      animation: pulse 1.6s infinite;
    }

    @keyframes pulse {
      0% { transform: scale(0.7); opacity: 1; }
      100% { transform: scale(1.4); opacity: 0; }
    }

    .title {
      font-size: 22px;
      font-weight: 800;
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }

    .subtitle {
      font-size: 12px;
      opacity: 0.85;
      margin-top: 4px;
    }

    .status-badge {
      padding: 6px 14px;
      border-radius: 999px;
      font-size: 11px;
      border: 1px solid rgba(148,163,184,0.8);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #ef4444;
    }

    .status-dot.on {
      background: var(--accent);
    }

    .grid {
      display: grid;
      grid-template-columns: 1.2fr 1fr;
      gap: 16px;
    }

    @media (max-width: 900px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: var(--glass);
      border-radius: 18px;
      border: 1px solid rgba(148,163,184,0.6);
      padding: 12px;
      backdrop-filter: blur(18px);
    }

    .card-title {
      font-size: 16px;
      font-weight: 600;
    }

    .card-subtitle {
      font-size: 11px;
      opacity: 0.8;
      margin-top: 4px;
    }

    .camera-wrap {
      margin-top: 10px;
      border-radius: 16px;
      overflow: hidden;
      aspect-ratio: 16/9;
      border: 1px solid rgba(148,163,184,0.7);
      background: #020617;
      position: relative;
    }

    video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .btn-row {
      margin-top: 10px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    button {
      border: none;
      border-radius: 999px;
      padding: 8px 16px;
      font-size: 13px;
      cursor: pointer;
      font-weight: 500;
    }

    .btn-primary {
      background: linear-gradient(135deg, #22c55e, #4ade80);
      color: #052e16;
    }

    .btn-secondary {
      background: #020617;
      color: #e5e7eb;
      border: 1px solid rgba(148,163,184,0.7);
    }

    .btn-danger {
      background: linear-gradient(135deg, #ef4444, #b91c1c);
      color: #fee2e2;
    }

    .lists {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      margin-top: 10px;
    }

    .list-card {
      background: rgba(15,23,42,0.95);
      border-radius: 14px;
      padding: 8px;
      border: 1px solid rgba(59,130,246,0.9);
      max-height: 220px;
      overflow-y: auto;
    }

    .chip {
      padding: 6px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.7);
      margin-bottom: 5px;
      font-size: 12px;
    }

    .chip.present {
      border-color: rgba(34,197,94,0.9);
      background: rgba(22,163,74,0.12);
    }

    .footer {
      margin-top: 10px;
      font-size: 11px;
      text-align: right;
      opacity: 0.85;
    }
  </style>
</head>

<body>
  <div class="app">
    <header class="header">
      <div>
        <div class="title-row">
          <span class="pulse-dot"></span>
          <span class="title">SMART ATTENDANCE SYSTEM</span>
        </div>
        <div class="subtitle">
          Automated attendance monitoring using live camera feed and real-time system alerts.
        </div>
      </div>

      <div class="status-badge">
        <span id="statusDot" class="status-dot"></span>
        <span id="statusText">Idle · Camera off</span>
      </div>
    </header>

    <main class="grid">
      <!-- Camera Section -->
      <section class="card">
        <div class="card-title">Live Camera & Attendance Detection</div>
        <div class="card-subtitle">
          Enable the camera to begin attendance monitoring and automatic student detection.
        </div>

        <div class="camera-wrap">
          <video id="video" autoplay muted playsinline></video>
        </div>

        <div class="btn-row">
          <button class="btn-primary" id="startBtn">▶ Start Camera</button>
          <button class="btn-secondary" id="stopBtn" disabled>■ Stop Camera</button>
          <button class="btn-danger" id="resetBtn">↺ Reset Attendance</button>
        </div>
      </section>

      <!-- Dashboard -->
      <section class="card">
        <div class="card-title">Attendance Dashboard</div>
        <div class="card-subtitle">
          Displays present and pending students based on live attendance monitoring.
        </div>

        <div class="lists">
          <div class="list-card" id="presentList"></div>
          <div class="list-card" id="pendingList"></div>
        </div>

        <div class="footer">
          Developed by <strong>Keerthana</strong>, <strong>Hari Chandana</strong> &amp; <strong>Rinithasai K</strong>
        </div>
      </section>
    </main>
  </div>

<script>
  const STUDENTS = [
    "Keerthana","Hari Chandana","Vedha Sai G","Ajith Kumar",
    "Shiva Narayana","Rinithasai K","Teja","Hemanth",
    "Likitha","Sai Charan","Navya","Pranav"
  ];

  const present = new Set();
  const video = document.getElementById("video");
  const statusDot = document.getElementById("statusDot");
  const statusText = document.getElementById("statusText");
  const presentList = document.getElementById("presentList");
  const pendingList = document.getElementById("pendingList");

  let stream = null;
  let timer = null;

  function updateLists() {
    presentList.innerHTML = "<b>Present</b><br>";
    pendingList.innerHTML = "<b>Pending</b><br>";

    STUDENTS.forEach(name => {
      const div = document.createElement("div");
      div.className = "chip " + (present.has(name) ? "present" : "");
      div.textContent = name;
      (present.has(name) ? presentList : pendingList).appendChild(div);
    });
  }

  async function startCamera() {
    stream = await navigator.mediaDevices.getUserMedia({ video: true });
    video.srcObject = stream;
    statusDot.classList.add("on");
    statusText.textContent = "Live · Attendance monitoring active";
    timer = setInterval(() => {
      const pending = STUDENTS.filter(s => !present.has(s));
      if (pending.length > 0) {
        present.add(pending[Math.floor(Math.random()*pending.length)]);
        updateLists();
      }
    }, 2500);
    document.getElementById("startBtn").disabled = true;
    document.getElementById("stopBtn").disabled = false;
  }

  function stopCamera() {
    stream.getTracks().forEach(t => t.stop());
    clearInterval(timer);
    statusDot.classList.remove("on");
    statusText.textContent = "Idle · Camera off";
    document.getElementById("startBtn").disabled = false;
    document.getElementById("stopBtn").disabled = true;
  }

  document.getElementById("startBtn").onclick = startCamera;
  document.getElementById("stopBtn").onclick = stopCamera;
  document.getElementById("resetBtn").onclick = () => {
    present.clear();
    updateLists();
  };

  updateLists();
</script>
</body>
</html>
